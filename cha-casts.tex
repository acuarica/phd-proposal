
\chapter{Casts} \label{cha:casts}


Four types of casts in C++
const\_cast
dynamic\_cast
reinterpret\_cast
static\_cast



TODO Check for the following in Maven:
Counting Casts in Maven
CheckCast
InstanceOf
catch ClassCastException



* Counting Casts related Instructions and Exceptions in Maven Central

The *Bytecode* column refer to either an cast related instruction or exception.
These are the cast related bytecodes:

- checkcast as specified by:
https://docs.oracle.com/javase/specs/jvms/se7/html/\url{jvms-6.html#jvms-6.5.checkcast}
- instanceof as specified by:
https://docs.oracle.com/javase/specs/jvms/se7/html/\url{jvms-6.html#jvms-6.5.instanceof}
- ClassCastException as specified by:
https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html

The following two columns indicates how many bytecode where found in:
- *local*
My local machine.
This machine contains a *partial* download of a current snapshot of Maven Central.
Re-download all the artifacts is in progress.
- *fermat*
fermat.inf.usi.ch machine.
This machine contains an old snapshot of Maven Central (2015)

| *Bytecode*         | *local ~ 225.221/1.342.637 jars* | *fermat ~ 300.000/622.310 jars* |
|--------------------+----------------------------------+---------------------------------|
| checkcast          |                       75.486.246 |                     142.425.923 |
| instanceof         |                       15.048.033 |                      25.458.974 |
| ClassCastException |                          404.699 |                         542.049 |





Use our casts empirical study to support more studies on subjects
Instead of using arbitrary experiments (tasks) use real world examples
Search for ~Related Work~: Is it already done?
Uses of casts in C++?
TODO Look in MSR last years, and search for Java casts studies




To type or not to type

https://blog.acolyer.org/2017/09/19/to-type-or-not-to-type-quantifying-detectable-bugs-in-javascript/

\url{http://ttendency.cs.ucl.ac.uk/projects/type_study/documents/type_study.pdf}


Cast Patterns

Slices/Dominators \& Post-Dominators for Control Dependencies
Slices as a tree in JNIF


Dominators/Immediate Dominators
A Simple, Fast Dominance Algorithm paper


Reimplement the pattern search w/ static analysis?
Manual inspection does not scale up
Redo manual inspection
Is it possible to write an analysis to detect a single pattern?
Relate each pattern w/ alternatives in another languages
Criticize of language features/API design
Language for Serialization paper POPL 2006
The next 700 data description languages


Studies of Casts in Java
Cast it at Your Own Risk: Java Casts in the Wild????
Use our casts empirical study to support more studies on subjects
Instead of using arbitrary experiments (tasks) use real world examples


Time Restrictions/Thesis Schedule

Graph (PDG) Comparison
Sink/Source
Linear Comparison
Code Search
Jungloid Mining

Code Pattern Search (particular for casts)
Coercion

https://www.juliasoft.com/
What are the cast patterns?
Abuses of cast
Is it code or data?

Use or not use of parametrized types?

\section{Related Work}

\cite{winther_guarded_2011}

The closest work to our casting study is by~
Study of type casts in several project.
Quite similar to what we want to do.
Focus on Guarded Type casts.
